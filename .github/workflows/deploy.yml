name: Docker deploy

on: 
    push:
        branches: main
    pull_request:
        branches: main

jobs:
    deploy:

        runs-on: ubuntu-latest

        steps:
            - name: Checkout code
              uses: actions/checkout@v4

            - name: Docker build
              run: docker build -t adityamangal19/leave_manager_repo:latest

            - name: Configuring Docker hub
              run: echo "${{secrets.DOCKER_PASS}}" | docker login -u ${{secrets.DOCKER_USERNAME}}  --password-stdin

            - name: Pushing image to Docker hub
              run: docker push adityamangal19/leave_manager_repo:latest